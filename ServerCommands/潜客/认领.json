{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "认领",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
        "Permission": {
          "$type": "Forguncy.SaveLoad.ServerCommandPermissionSaveData, ServerDesignerCommon",
          "PermissionData": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
            "permissionResource": {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
            },
            "permissionBindings": {
              "$type": "System.Collections.Generic.List`1[[Forguncy.RbacPermission.Core.Impl.ServerCommand.IServerCommandPermissionBinding, Forguncy.RbacPermission.Core]], System.Private.CoreLib",
              "$values": [
                {
                  "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
                  "roleNames": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": []
                  },
                  "permissionGroups": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": [
                      "7cc7ba95-af77-448d-9a3a-7a8a302e18e9",
                      "510f370b-5c34-4043-9a98-5734f902284b",
                      "2f5a2356-ed77-41cd-af54-2ca4b3ee68a2",
                      "48023781-43da-46ea-8504-47be5140dc9f",
                      "5171faa1-c2eb-4f02-a78a-431bfeb28eb8",
                      "0f7e033c-5904-43e9-86ff-1a105cdcf2a9",
                      "aa75645a-c0bd-49e6-b20b-60a38bf1b9ee",
                      "af221c1c-6f2b-4c66-837f-956100f23968",
                      "3e7ede91-0aab-422b-8979-56e873f503f4",
                      "b2e5b095-5716-4745-b0f5-70691b09590b",
                      "aa0a4d00-3d58-4ced-a7df-99ee1fece840",
                      "52596539-ebf8-41a9-87fd-4f93bbffdea3",
                      "780efe20-c0e2-43ac-83c0-30df1dcd4894",
                      "68ef27fd-fa08-4559-97c7-10cd37772ebb"
                    ]
                  }
                }
              ]
            }
          }
        },
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "潜客ID",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
        "CommandList": {
          "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "负责人",
              "TableValue": {
                "$type": "Forguncy.Model.Commands.ParameterTableValue, ServerDesignerCommon",
                "TableName": "潜客表",
                "OnlyGetValue": true,
                "TableValueType": 0,
                "BindingInfos": {
                  "$type": "System.Collections.Generic.List`1[[Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon]], System.Private.CoreLib",
                  "$values": [
                    {
                      "$type": "Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon",
                      "GUID": "164ef1e0-26f0-4302-a97c-ef6345079a8d",
                      "BindingInfo": {
                        "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                        "TableName": "潜客表",
                        "ColumnName": "负责人",
                        "GUID": "9a76f15f-bf35-4056-9ca0-be9cc0fcc447"
                      },
                      "ColumnName": "负责人"
                    }
                  ]
                },
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                    "TableName": "潜客表",
                    "ColumnName": "ID",
                    "GUID": "5a9505c1-99c5-4523-95d5-e767d3da65fe"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=潜客ID"
                  }
                }
              },
              "ID": "e7758f778fe2470f9271638e7f47283b",
              "BreakpointIdentity": "31b2ba4c-bf35-4557-b93f-76e32f3da1af"
            },
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": {
                "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "Condition": {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=负责人"
                        }
                      },
                      "value": "%Null%",
                      "compareType": 1
                    },
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                          "ErrorCode": "-1",
                          "Message": "当前潜客已被他人认领",
                          "BreakpointIdentity": "7b43bd18-5495-4a41-819e-4f7b5fd9f800"
                        }
                      ]
                    },
                    "ID": "aa07bf2d-c664-4987-97ac-7dd348102614"
                  },
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "潜客表",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                              "TableName": "潜客表",
                              "ColumnName": "ID",
                              "GUID": "262934a9-4f46-45c5-9a19-6bc523592a04"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=潜客ID"
                            }
                          },
                          "UpdateBindingValues": {
                            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon]], System.Private.CoreLib",
                            "$values": [
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客表",
                                  "ColumnName": "负责人",
                                  "GUID": "32a9ccc3-eec5-421e-8b0a-ce115f7f0c49"
                                },
                                "Value": "%CurrentUser%"
                              },
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客表",
                                  "ColumnName": "状态ID",
                                  "GUID": "a1909852-e77b-48e1-a597-60ec2528bf17"
                                },
                                "Value": "2"
                              }
                            ]
                          },
                          "BreakpointIdentity": "44fb6f16-35d0-4c3d-8b50-41a4dbbb1617"
                        },
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "潜客记录操作表",
                          "UpdateType": "add",
                          "ShowConfirm": false,
                          "UpdateBindingValues": {
                            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon]], System.Private.CoreLib",
                            "$values": [
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客记录操作表",
                                  "ColumnName": "潜客ID",
                                  "GUID": "5026dc1f-3f67-48fd-9867-f28080741776"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=潜客ID"
                                }
                              },
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客记录操作表",
                                  "ColumnName": "操作类型",
                                  "GUID": "9634d3bb-7edd-416a-9d5d-bf97d0c27830"
                                },
                                "Value": "认领"
                              }
                            ]
                          },
                          "BreakpointIdentity": "077c6a8c-0f7b-4781-8e4f-6e55feccc084"
                        }
                      ]
                    },
                    "ID": "393290e5-f442-4dfd-9d7e-d2405790080b"
                  }
                ]
              },
              "BreakpointIdentity": "97639b9f-7166-4a7b-a7b1-36395f4641aa"
            }
          ]
        },
        "BreakpointIdentity": "a1119f1b-a914-4dd1-b4fa-75d1ba1492da"
      }
    ]
  }
}