{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "认领",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
        "Permission": {
          "$type": "Forguncy.SaveLoad.ServerCommandPermissionSaveData, ServerDesignerCommon",
          "PermissionData": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
            "permissionResource": {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
            },
            "permissionBindings": {
              "$type": "System.Collections.Generic.List`1[[Forguncy.RbacPermission.Core.Impl.ServerCommand.IServerCommandPermissionBinding, Forguncy.RbacPermission.Core]], System.Private.CoreLib",
              "$values": [
                {
                  "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
                  "permissionGroups": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": [
                      "e8cd8c16-7795-4e40-9235-454e164dda34"
                    ]
                  }
                }
              ]
            }
          }
        },
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "潜客ID",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
        "CommandList": {
          "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "负责人",
              "TableValue": {
                "$type": "Forguncy.Model.Commands.ParameterTableValue, ServerDesignerCommon",
                "TableName": "潜客表",
                "OnlyGetValue": true,
                "TableValueType": 0,
                "BindingInfos": {
                  "$type": "System.Collections.Generic.List`1[[Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon]], System.Private.CoreLib",
                  "$values": [
                    {
                      "$type": "Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon",
                      "GUID": "164ef1e0-26f0-4302-a97c-ef6345079a8d",
                      "BindingInfo": {
                        "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                        "TableName": "潜客表",
                        "ColumnName": "负责人",
                        "GUID": "9a76f15f-bf35-4056-9ca0-be9cc0fcc447"
                      },
                      "ColumnName": "负责人"
                    }
                  ]
                },
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                    "TableName": "潜客表",
                    "ColumnName": "ID",
                    "GUID": "5a9505c1-99c5-4523-95d5-e767d3da65fe"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=潜客ID"
                  }
                }
              },
              "ID": "e7758f778fe2470f9271638e7f47283b",
              "BreakpointIdentity": "dfadda8f-46d2-451d-ad15-609001e78d09"
            },
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": {
                "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "Condition": {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=负责人"
                        }
                      },
                      "value": "%Null%",
                      "compareType": 1
                    },
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                          "ErrorCode": "-1",
                          "Message": "当前潜客已被他人认领",
                          "BreakpointIdentity": "57951943-ab7d-41af-8a7e-8dbf1bed7776"
                        }
                      ]
                    },
                    "ID": "e1476896-433d-4708-a1cb-d2a2260528d6"
                  },
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "潜客表",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                              "TableName": "潜客表",
                              "ColumnName": "ID",
                              "GUID": "262934a9-4f46-45c5-9a19-6bc523592a04"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=潜客ID"
                            }
                          },
                          "UpdateBindingValues": {
                            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon]], System.Private.CoreLib",
                            "$values": [
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客表",
                                  "ColumnName": "负责人",
                                  "GUID": "32a9ccc3-eec5-421e-8b0a-ce115f7f0c49"
                                },
                                "Value": "%CurrentUser%"
                              },
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客表",
                                  "ColumnName": "状态ID",
                                  "GUID": "a1909852-e77b-48e1-a597-60ec2528bf17"
                                },
                                "Value": "2"
                              }
                            ]
                          },
                          "BreakpointIdentity": "3bb055b4-18b3-455d-9e09-2c8080f6ad05"
                        },
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "潜客记录操作表",
                          "UpdateType": "add",
                          "ShowConfirm": false,
                          "UpdateBindingValues": {
                            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon]], System.Private.CoreLib",
                            "$values": [
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客记录操作表",
                                  "ColumnName": "潜客ID",
                                  "GUID": "5026dc1f-3f67-48fd-9867-f28080741776"
                                },
                                "Value": {
                                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                                  "SerializeProperty": "=潜客ID"
                                }
                              },
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "潜客记录操作表",
                                  "ColumnName": "操作类型",
                                  "GUID": "9634d3bb-7edd-416a-9d5d-bf97d0c27830"
                                },
                                "Value": "认领"
                              }
                            ]
                          },
                          "BreakpointIdentity": "f8ab5949-0fc0-4b8e-a95d-6cce9315106c"
                        }
                      ]
                    },
                    "ID": "78fd9d01-0178-4232-a0d0-8d51905a04fe"
                  }
                ]
              },
              "BreakpointIdentity": "3c5cbdec-efda-4ed3-afdc-58268241a7fa"
            }
          ]
        },
        "BreakpointIdentity": "8e0589e4-8985-4f8e-9879-543d4f8f65b4"
      }
    ]
  }
}