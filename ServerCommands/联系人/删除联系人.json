{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "删除联系人",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
        "Permission": {
          "$type": "Forguncy.SaveLoad.ServerCommandPermissionSaveData, ServerDesignerCommon",
          "PermissionData": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
            "permissionResource": {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
            },
            "permissionBindings": {
              "$type": "System.Collections.Generic.List`1[[Forguncy.RbacPermission.Core.Impl.ServerCommand.IServerCommandPermissionBinding, Forguncy.RbacPermission.Core]], System.Private.CoreLib",
              "$values": [
                {
                  "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
                  "roleNames": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": []
                  },
                  "permissionGroups": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": [
                      "7cc7ba95-af77-448d-9a3a-7a8a302e18e9",
                      "510f370b-5c34-4043-9a98-5734f902284b",
                      "2f5a2356-ed77-41cd-af54-2ca4b3ee68a2",
                      "48023781-43da-46ea-8504-47be5140dc9f"
                    ]
                  }
                }
              ]
            }
          }
        },
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "联系人ID",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
        "CommandList": {
          "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "被商机使用个数",
              "TableValue": {
                "$type": "Forguncy.Model.Commands.ParameterTableValue, ServerDesignerCommon",
                "TableName": "商机表",
                "TableValueType": 3,
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                    "TableName": "商机表",
                    "ColumnName": "联系人ID",
                    "GUID": "6c71e7be-5d46-4515-a7f1-58a85401bf61"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=联系人ID"
                  }
                }
              },
              "ID": "6d6fe526c26f436cacd39c491e275e3a",
              "BreakpointIdentity": "feff8d89-4a67-4c6c-9a8b-1b05b29dabfc"
            },
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": {
                "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "Condition": {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=被商机使用个数"
                        }
                      },
                      "value": "0",
                      "compareType": 2
                    },
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                          "ErrorCode": "-1",
                          "Message": "该联系人已被商机使用，不能删除",
                          "BreakpointIdentity": "06a1579b-6a2a-4dfa-84f2-424267733b42"
                        }
                      ]
                    },
                    "ID": "da0d3fa5-ae24-4ef2-ba92-6b9d2bd3004d"
                  },
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "联系人表",
                          "UpdateType": "delete",
                          "ShowConfirm": true,
                          "ConfirmText": "您确定要删除吗？",
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                              "TableName": "联系人表",
                              "ColumnName": "ID",
                              "GUID": "96451333-3730-4442-897c-73dd0df0c3df"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=联系人ID"
                            }
                          },
                          "BreakpointIdentity": "6f525e6c-d269-4448-a5f3-a1e4e3769739"
                        }
                      ]
                    },
                    "ID": "38d260b7-4e1c-44ba-9f3e-c6f1ae095d1c"
                  }
                ]
              },
              "BreakpointIdentity": "5dd32df9-0232-4b18-8178-3e415493c36d"
            }
          ]
        },
        "BreakpointIdentity": "9d21b0b8-c670-4ccb-9183-e4395bc1ae31"
      }
    ]
  }
}