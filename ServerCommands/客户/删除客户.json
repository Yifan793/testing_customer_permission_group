{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "删除客户",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
        "Permission": {
          "$type": "Forguncy.SaveLoad.ServerCommandPermissionSaveData, ServerDesignerCommon",
          "PermissionData": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
            "permissionResource": {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
            },
            "permissionBindings": {
              "$type": "System.Collections.Generic.List`1[[Forguncy.RbacPermission.Core.Impl.ServerCommand.IServerCommandPermissionBinding, Forguncy.RbacPermission.Core]], System.Private.CoreLib",
              "$values": [
                {
                  "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
                  "roleNames": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": []
                  },
                  "permissionGroups": {
                    "$type": "System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]], System.Private.CoreLib",
                    "$values": [
                      "7cc7ba95-af77-448d-9a3a-7a8a302e18e9",
                      "510f370b-5c34-4043-9a98-5734f902284b",
                      "2f5a2356-ed77-41cd-af54-2ca4b3ee68a2",
                      "48023781-43da-46ea-8504-47be5140dc9f",
                      "5171faa1-c2eb-4f02-a78a-431bfeb28eb8",
                      "0f7e033c-5904-43e9-86ff-1a105cdcf2a9",
                      "fb63ae86-b97e-4f5e-8e61-f04a7ad59f25",
                      "bedb17e1-3438-4324-a367-ab9a891031fc",
                      "0b596577-b343-4d68-aacb-0f8588791ec2",
                      "af221c1c-6f2b-4c66-837f-956100f23968",
                      "84ac0150-333f-470f-9680-7cd9826f350b",
                      "b2e5b095-5716-4745-b0f5-70691b09590b",
                      "aa0a4d00-3d58-4ced-a7df-99ee1fece840",
                      "52596539-ebf8-41a9-87fd-4f93bbffdea3",
                      "780efe20-c0e2-43ac-83c0-30df1dcd4894",
                      "68ef27fd-fa08-4559-97c7-10cd37772ebb",
                      "5ae07dcb-66fc-4602-8a49-adb118161ac4"
                    ]
                  }
                }
              ]
            }
          }
        },
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "客户ID",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon",
        "CommandList": {
          "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "被商机使用个数",
              "TableValue": {
                "$type": "Forguncy.Model.Commands.ParameterTableValue, ServerDesignerCommon",
                "TableName": "商机表",
                "TableValueType": 3,
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                    "TableName": "商机表",
                    "ColumnName": "客户ID",
                    "GUID": "2f239976-f315-41ab-9880-5d04dd540951"
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=客户ID"
                  }
                }
              },
              "ID": "6dbecae499ee4c298d9fd63bbf8a1d45",
              "BreakpointIdentity": "5362dd51-9799-45ac-a5e4-3e18051776c2"
            },
            {
              "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
              "ConditionAndCommandPairList": {
                "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "Condition": {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=被商机使用个数"
                        }
                      },
                      "value": "0",
                      "compareType": 2
                    },
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                          "ErrorCode": "-1",
                          "Message": "该客户已被商机使用，不能删除",
                          "BreakpointIdentity": "96508ae8-54ba-4d55-a016-0bbba6014523"
                        }
                      ]
                    },
                    "ID": "0579dd52-f666-4deb-9b0b-87aef2199b96"
                  },
                  {
                    "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
                    "CommandList": {
                      "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "客户表",
                          "UpdateType": "delete",
                          "ShowConfirm": true,
                          "ConfirmText": "您确定要删除吗？",
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                              "TableName": "客户表",
                              "ColumnName": "ID",
                              "GUID": "92a64382-596b-466b-9dcb-56e146d90e4a"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=客户ID"
                            }
                          },
                          "BreakpointIdentity": "ace2bb2e-0c2e-4139-8058-3bdf4f178106"
                        },
                        {
                          "$type": "Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon",
                          "TableName": "联系人表",
                          "ShowConfirm": false,
                          "RowsToUpdate": 1,
                          "RowsToUpdateCondition": {
                            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                            "ColumnBindingInfo": {
                              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                              "TableName": "联系人表",
                              "ColumnName": "客户ID",
                              "GUID": "0997de17-e191-4a22-84c2-49383ef38c10"
                            },
                            "Value": {
                              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                              "SerializeProperty": "=客户ID"
                            }
                          },
                          "UpdateBindingValues": {
                            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon]], System.Private.CoreLib",
                            "$values": [
                              {
                                "$type": "Forguncy.Model.UpdateBindingValueItem, ServerDesignerCommon",
                                "BindingInfo": {
                                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                                  "TableName": "联系人表",
                                  "ColumnName": "客户ID",
                                  "GUID": "8d1e2b69-71c7-4184-909b-e8883fd7d783"
                                }
                              }
                            ]
                          },
                          "BreakpointIdentity": "f71cddf9-e876-4c45-a87a-0a0e88b0152d"
                        }
                      ]
                    },
                    "ID": "c3c0d7dc-f6b7-4fad-9188-c49709ffbfcd"
                  }
                ]
              },
              "BreakpointIdentity": "dd36e777-a7d9-4eeb-ba37-dd187c7bab64"
            }
          ]
        },
        "BreakpointIdentity": "fa6150e1-287e-4f3c-bb06-4d3d98773122"
      }
    ]
  }
}